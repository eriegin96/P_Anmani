(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8723],{95450:function(e,n,t){Promise.resolve().then(t.bind(t,44874))},11145:function(e,n,t){"use strict";t.d(n,{A:function(){return r}});let r={rules:[{required:!0,message:"Trường n\xe0y kh\xf4ng được để trống"}]}},44874:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return E}});var r=t(9268),i=t(83206),o=t(50946),u=t(56008),s=t(86006),c=t(70509),l=t(76234),a=t(3508),m=t(89493),d=t(53235),f=t(81145),h=t(44244),p=t(52264),x=t(11145),g=t(48438);function _(){let e=i.Z.useFormInstance(),n=i.Z.useWatch("discountOption",e),t=p.Uu.map(e=>({value:e.id,label:e.name}));return(0,r.jsxs)(c.Z,{gutter:20,children:[(0,r.jsx)(l.Z,{span:12,children:(0,r.jsx)(i.Z.Item,{name:"productId",label:"Voucher n\xe0y thuộc về sản phẩm",...x.A,children:(0,r.jsx)(a.Z,{placeholder:"Vui l\xf2ng chọn sản phẩm",onChange:e=>{console.log("status ".concat(e))},allowClear:!0,options:t})})}),(0,r.jsx)(l.Z,{span:12,children:(0,r.jsx)(i.Z.Item,{name:"expiredDate",label:"Ng\xe0y hết hạn",rules:[{type:"object",required:!0,message:"Trường n\xe0y kh\xf4ng được để trống"}],children:(0,r.jsx)(m.Z,{placement:"bottomLeft",format:g.zT})})}),(0,r.jsx)(l.Z,{span:24,children:(0,r.jsx)(i.Z.Item,{name:"condition",label:"Điều kiện",children:(0,r.jsx)(d.default,{placeholder:"Điều kiện giảm gi\xe1"})})}),(0,r.jsx)(l.Z,{span:12,children:(0,r.jsx)(i.Z.Item,{name:"discountOption",label:"Giảm gi\xe1",...x.A,children:(0,r.jsxs)(f.ZP.Group,{children:[(0,r.jsx)(f.ZP,{value:"amount",children:"Số tiền"}),(0,r.jsx)(f.ZP,{value:"percent",children:"Phần trăm"})]})})}),(0,r.jsx)(l.Z,{span:12,children:"amount"===n?(0,r.jsx)(i.Z.Item,{name:["discount","amount"],label:"Số tiền giảm gi\xe1",...x.A,children:(0,r.jsx)(h.Z,{step:1e6,formatter:e=>"VND ".concat(e).replace(g.sj,"."),parser:e=>Number(e.replace(/VND\s?|(\.*)/g,""))})}):(0,r.jsx)(i.Z.Item,{name:["discount","percent"],label:"Phần trăm giảm gi\xe1",...x.A,children:(0,r.jsx)(h.Z,{step:1,formatter:e=>"".concat(e,"%"),parser:e=>Number(e.replace("%",""))})})})]})}var j=t(86902),Z=t.n(j),v=t(47990),b=t.n(v),y=t(97476);function E(e){let{isEditing:n=!1}=e,[t]=i.Z.useForm(),c=(0,u.useRouter)(),{id:l}=(0,u.useParams)(),{data:a}=(0,y.GF)(l),{trigger:m,isMutating:d}=(0,y.ve)(),{trigger:f,isMutating:h}=(0,y.cB)(l);return(0,s.useEffect)(()=>{var e;let n=a&&p.Co.find(e=>e.id===l);t.setFieldsValue({...n,discountOption:null!==(e=null==n?void 0:n.discountOption)&&void 0!==e?e:"amount",expiredDate:(null==n?void 0:n.expiredDate)?Z()(null==n?void 0:n.expiredDate,g.zT):Z()(new Date)}),console.log(n)},[a,l,t]),(0,r.jsxs)(i.Z,{layout:"vertical",requiredMark:"optional",form:t,onFinish:e=>{let t=e.expiredDate.format(g.zT),r={...e,expiredDate:t};console.log(r),n?f(r):m(r)},className:b().form,children:[(0,r.jsxs)("h3",{className:b().formTitle,children:[l?"Sửa th\xf4ng tin":"Tạo"," Voucher"]}),(0,r.jsx)("label",{children:"Th\xf4ng tin chung"}),(0,r.jsx)(_,{}),(0,r.jsxs)("div",{className:b().actionWrapper,children:[(0,r.jsx)(o.ZP,{danger:!0,onClick:()=>c.back(),children:"Hủy"}),(0,r.jsxs)(o.ZP,{type:"primary",htmlType:"submit",loading:n?h:d,children:[n?"Sửa":"Tạo"," Voucher"]})]})]})}},48438:function(e,n,t){"use strict";t.d(n,{fX:function(){return r},jw:function(){return c},sj:function(){return o},uX:function(){return s},y2:function(){return i},zT:function(){return u}});let r=1e8,i=5e11,o=RegExp("\\B(?<!\\.\\d*)(?=(\\d{3})+(?!\\d))","g"),u="DD/MM/YYYY",s="https://img.photo.com",c="nguyenvana@email.com"},97476:function(e,n,t){"use strict";t.d(n,{ve:function(){return l},bg:function(){return h},GF:function(){return i.G},Mz:function(){return r.M},cB:function(){return d}});var r=t(68498),i=t(67247),o=t(61305),u=t(90529),s=t(41496);let c=(e,n)=>{let{arg:t}=n;return o.b.post(u.QP.VOUCHERS,JSON.stringify(t)).then(e=>e)},l=()=>{let{data:e,trigger:n,isMutating:t,error:r}=(0,s.Z)(u.$h.CREATE_VOUCHER,c);return{trigger:n,isMutating:t,error:r}};var a=t(85771);let m=(e,n)=>{let{arg:t}=n;return o.b.patch(e,JSON.stringify(t)).then(e=>e)},d=e=>{let{data:n,trigger:t,isMutating:r,error:i}=(0,s.Z)((0,a.R)(u.QP.VOUCHERS,e),m);return{trigger:t,isMutating:r,error:i}},f=(e,n)=>{let{arg:t}=n;return o.b.delete((0,a.R)(u.QP.VOUCHERS,t)).then(e=>e)},h=()=>{let{data:e,trigger:n,isMutating:t,error:r}=(0,s.Z)(u.$h.DELETE_VOUCHER,f);return{trigger:n,isMutating:t,error:r}}},67247:function(e,n,t){"use strict";t.d(n,{G:function(){return c}});var r=t(61305),i=t(90529),o=t(85771),u=t(57797);let s=e=>r.b.get(e).then(e=>e),c=e=>(0,u.ZP)((0,o.R)(i.QP.VOUCHERS,e),s)},68498:function(e,n,t){"use strict";t.d(n,{M:function(){return s}});var r=t(61305),i=t(90529),o=t(57797);let u=e=>r.b.get(e).then(e=>e),s=()=>(0,o.ZP)(i.QP.VOUCHERS,u)},85771:function(e,n,t){"use strict";t.d(n,{R:function(){return r}});let r=function(){for(var e=arguments.length,n=Array(e),t=0;t<e;t++)n[t]=arguments[t];return n.join("/")}},47990:function(e){e.exports={form:"form_form___uL8A",formTitle:"form_formTitle__uNNDT",addListItemBtn:"form_addListItemBtn__4otIN",formListItem:"form_formListItem__ulczd",formListItemDiv:"form_formListItemDiv__yGsTN",actionWrapper:"form_actionWrapper__VjW65",overlayShow:"form_overlayShow__Kgy1e",overlayHide:"form_overlayHide__7ob_K"}}},function(e){e.O(0,[6695,8332,1032,3394,2894,946,7269,1512,6366,3508,1145,9493,3206,4244,892,8868,9253,5769,1744],function(){return e(e.s=95450)}),_N_E=e.O()}]);